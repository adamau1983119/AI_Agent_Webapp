# Webapp æ¸¬è©¦æŒ‡å—

## ğŸ“‹ æ¸¬è©¦å‰æº–å‚™

### 1. ç¢ºèªç’°å¢ƒ

**å¾Œç«¯**:
```bash
cd backend
python --version  # æ‡‰è©² >= 3.13
pip list | grep fastapi  # ç¢ºèªä¾è³´å·²å®‰è£
```

**å‰ç«¯**:
```bash
cd frontend
node --version  # æ‡‰è©² >= 18
npm list  # ç¢ºèªä¾è³´å·²å®‰è£
```

### 2. æª¢æŸ¥ç’°å¢ƒè®Šæ•¸

**å¾Œç«¯** (`backend/.env`):
```env
MONGODB_URL=your_mongodb_connection_string
AI_SERVICE=ollama  # æˆ– gemini/openai/qwen
```

**å‰ç«¯** (`frontend/.env`):
```env
VITE_API_URL=http://localhost:8000/api/v1
```

---

## ğŸš€ å•Ÿå‹•æœå‹™

### 1. å•Ÿå‹•å¾Œç«¯

```bash
cd backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**ç¢ºèªå¾Œç«¯é‹è¡Œ**:
- è¨ªå• http://localhost:8000/docs æŸ¥çœ‹ API æ–‡æª”
- è¨ªå• http://localhost:8000/api/v1/health ç¢ºèªå¥åº·ç‹€æ…‹

### 2. å•Ÿå‹•å‰ç«¯

```bash
cd frontend
npm run dev
```

**ç¢ºèªå‰ç«¯é‹è¡Œ**:
- è¨ªå• http://localhost:5173 æˆ– http://localhost:3000

---

## ğŸ§ª æ¸¬è©¦åŠŸèƒ½

### 1. æ¸¬è©¦äº’å‹•è¿½è¹¤ç³»çµ±

#### 1.1 è¨˜éŒ„äº’å‹•

**ä½¿ç”¨ API**:
```bash
curl -X POST http://localhost:8000/api/v1/interactions \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "user_test_001",
    "topic_id": "topic_fashion_20251230090000_0",
    "action": "like",
    "duration": 30
  }'
```

**é æœŸå›æ‡‰**:
```json
{
  "id": "interaction_xxx",
  "user_id": "user_test_001",
  "topic_id": "topic_fashion_20251230090000_0",
  "action": "like",
  "duration": 30,
  "created_at": "2025-12-30T10:00:00Z"
}
```

#### 1.2 æŸ¥è©¢äº’å‹•æ­·å²

```bash
curl http://localhost:8000/api/v1/interactions/user_test_001
```

#### 1.3 å–å¾—äº’å‹•çµ±è¨ˆ

```bash
curl http://localhost:8000/api/v1/interactions/user_test_001/stats
```

---

### 2. æ¸¬è©¦åå¥½æ¨¡å‹ç³»çµ±

#### 2.1 å–å¾—åå¥½

```bash
curl http://localhost:8000/api/v1/user/preferences
```

#### 2.2 æ›´æ–°åå¥½

```bash
curl -X PUT http://localhost:8000/api/v1/user/preferences \
  -H "Content-Type: application/json" \
  -d '{
    "fashion_weight": 0.6,
    "food_weight": 0.3,
    "trend_weight": 0.1
  }'
```

#### 2.3 æ ¹æ“šäº’å‹•è‡ªå‹•æ›´æ–°åå¥½

```bash
curl -X POST http://localhost:8000/api/v1/user/preferences/update-from-interactions
```

---

### 3. æ¸¬è©¦æ¨è–¦ç³»çµ±

#### 3.1 å–å¾—æ¨è–¦åˆ—è¡¨

```bash
curl http://localhost:8000/api/v1/recommendations/user_test_001
```

**é æœŸå›æ‡‰**:
```json
{
  "user_id": "user_test_001",
  "recommendations": [
    {
      "id": "recommendation_xxx",
      "category": "fashion",
      "keyword": "Dior 2026 æ˜¥å¤ç§€",
      "confidence_score": 0.85,
      "reason": "é¡§å®¢åå¥½fashionä¸»é¡Œï¼Œæ¨è–¦åˆ†æ•¸ï¼š0.85"
    }
  ]
}
```

#### 3.2 æŸ¥è©¢æ¨è–¦æ­·å²

```bash
curl http://localhost:8000/api/v1/recommendations/user_test_001/history
```

---

### 4. æ¸¬è©¦ä¸»é¡Œç™¼æ˜ç³»çµ±

#### 4.1 è‡ªå‹•ç™¼æ˜ä¸»é¡Œ

```bash
curl -X POST http://localhost:8000/api/v1/discover/topics/auto \
  -H "Content-Type: application/json" \
  -d '{
    "category": "fashion",
    "region": "global",
    "count": 3,
    "time_slot": "morning"
  }'
```

#### 4.2 æ‰‹å‹•è§¸ç™¼ä¸»é¡Œç™¼æ˜

```bash
curl -X POST http://localhost:8000/api/v1/discover/topics/manual \
  -H "Content-Type: application/json" \
  -d '{
    "category": "food",
    "region": "hongkong",
    "count": 3
  }'
```

#### 4.3 æŸ¥è©¢æ’è¡Œæ¦œ

```bash
curl "http://localhost:8000/api/v1/discover/topics/rankings?category=fashion&region=global"
```

---

### 5. æ¸¬è©¦è³‡æ–™é©—è­‰ç³»çµ±

#### 5.1 é©—è­‰ä¾†æº

```bash
curl -X POST http://localhost:8000/api/v1/validate/sources \
  -H "Content-Type: application/json" \
  -d '{
    "topic_id": "topic_test_001",
    "sources": [
      {
        "url": "https://www.vogue.com/article/dior-2026-spring",
        "name": "Vogue"
      }
    ]
  }'
```

#### 5.2 é©—è­‰ä¸»é¡Œä¸€è‡´æ€§

```bash
curl -X POST http://localhost:8000/api/v1/validate/topic-consistency \
  -H "Content-Type: application/json" \
  -d '{
    "keyword": "Dior 2026 æ˜¥å¤ç§€",
    "category": "fashion",
    "sources": [
      {
        "url": "https://www.vogue.com/article/dior-2026-spring",
        "name": "Vogue",
        "title": "Dior 2026 Spring Collection"
      }
    ]
  }'
```

#### 5.3 æª¢æŸ¥ä¾†æºå¥åº·åº¦

```bash
curl "http://localhost:8000/api/v1/validate/source-health/https://www.vogue.com"
```

---

### 6. æ¸¬è©¦ç…§ç‰‡åŒ¹é…ç³»çµ±

#### 6.1 åŒ¹é…ç…§ç‰‡

```bash
curl -X POST "http://localhost:8000/api/v1/images/topic_test_001/match?min_count=8"
```

#### 6.2 é©—è­‰ç…§ç‰‡åŒ¹é…åº¦

```bash
curl -X POST http://localhost:8000/api/v1/images/validate-match \
  -H "Content-Type: application/json" \
  -d '{
    "topic_id": "topic_test_001"
  }'
```

---

## ğŸ¯ å‰ç«¯æ¸¬è©¦æµç¨‹

### 1. åŸºæœ¬åŠŸèƒ½æ¸¬è©¦

1. **è¨ªå•é¦–é **
   - ç¢ºèª Dashboard æ­£å¸¸é¡¯ç¤º
   - æª¢æŸ¥çµ±è¨ˆå¡ç‰‡æ•¸æ“š

2. **ä¸»é¡Œåˆ—è¡¨**
   - è¨ªå• `/topics`
   - æ¸¬è©¦ç¯©é¸åŠŸèƒ½
   - æ¸¬è©¦åˆ†é åŠŸèƒ½

3. **ä¸»é¡Œè©³æƒ…**
   - é»æ“Šä¸»é¡Œå¡ç‰‡
   - æŸ¥çœ‹æ–‡ç« å’ŒåŠ‡æœ¬
   - æŸ¥çœ‹ç…§ç‰‡

### 2. äº’å‹•åŠŸèƒ½æ¸¬è©¦

1. **Like/Dislike**
   - é»æ“Šã€Œå–œæ­¡ã€æŒ‰éˆ•
   - é»æ“Šã€Œä¸å–œæ­¡ã€æŒ‰éˆ•
   - ç¢ºèªäº’å‹•è¨˜éŒ„æˆåŠŸ

2. **ç·¨è¼¯åŠŸèƒ½**
   - é»æ“Šã€Œç·¨è¼¯ã€æŒ‰éˆ•
   - ä¿®æ”¹æ–‡ç« å…§å®¹
   - ä¿å­˜æ›´æ”¹

3. **ç…§ç‰‡æ›¿æ›**
   - é»æ“Šã€Œæ›¿æ›ç…§ç‰‡ã€æŒ‰éˆ•
   - é¸æ“‡æ–°ç…§ç‰‡
   - ç¢ºèªæ›¿æ›æˆåŠŸ

### 3. éŸ¿æ‡‰å¼æ¸¬è©¦

1. **æ‰‹æ©Ÿæ¸¬è©¦** (375px - 767px)
   - æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·
   - åˆ‡æ›åˆ°æ‰‹æ©Ÿæ¨¡å¼
   - ç¢ºèªï¼š
     - æ‰€æœ‰æŒ‰éˆ•è‡³å°‘ 44Ã—44px
     - æ–‡å­—æ¸…æ™°å¯è®€
     - ç…§ç‰‡å¯æ»‘å‹•æŸ¥çœ‹
     - äº’å‹•æŒ‰éˆ•å›ºå®šåœ¨åº•éƒ¨

2. **å¹³æ¿æ¸¬è©¦** (768px - 1023px)
   - åˆ‡æ›åˆ°å¹³æ¿æ¨¡å¼
   - ç¢ºèªï¼š
     - 2æ¬„ç¶²æ ¼ä½ˆå±€
     - ç…§ç‰‡ç¶²æ ¼é¡¯ç¤º
     - äº’å‹•æŒ‰éˆ•æ°´å¹³æ’åˆ—

3. **æ¡Œé¢æ¸¬è©¦** (â‰¥1024px)
   - åˆ‡æ›åˆ°æ¡Œé¢æ¨¡å¼
   - ç¢ºèªï¼š
     - 3æ¬„ç¶²æ ¼ä½ˆå±€
     - å®Œæ•´åŠŸèƒ½é¡¯ç¤º
     - æ‡¸åœæ•ˆæœæ­£å¸¸

---

## ğŸ› å¸¸è¦‹å•é¡Œæ’æŸ¥

### 1. å¾Œç«¯ç„¡æ³•å•Ÿå‹•

**å•é¡Œ**: `ModuleNotFoundError`

**è§£æ±º**:
```bash
cd backend
pip install -r requirements.txt
```

### 2. MongoDB é€£æ¥å¤±æ•—

**å•é¡Œ**: `ConnectionError`

**è§£æ±º**:
- æª¢æŸ¥ `MONGODB_URL` æ˜¯å¦æ­£ç¢º
- ç¢ºèª MongoDB æœå‹™é‹è¡Œä¸­
- æª¢æŸ¥ç¶²è·¯é€£æ¥

### 3. å‰ç«¯ç„¡æ³•é€£æ¥å¾Œç«¯

**å•é¡Œ**: `Network Error`

**è§£æ±º**:
- æª¢æŸ¥ `VITE_API_URL` æ˜¯å¦æ­£ç¢º
- ç¢ºèªå¾Œç«¯æœå‹™é‹è¡Œåœ¨æ­£ç¢ºç«¯å£
- æª¢æŸ¥ CORS è¨­å®š

### 4. API è¿”å› 401 éŒ¯èª¤

**å•é¡Œ**: `Unauthorized`

**è§£æ±º**:
- æª¢æŸ¥ API Key è¨­å®šï¼ˆå¦‚æœå•Ÿç”¨ï¼‰
- ç¢ºèªè«‹æ±‚é ­åŒ…å«æ­£ç¢ºçš„èªè­‰ä¿¡æ¯

---

## ğŸ“Š æ¸¬è©¦æª¢æŸ¥æ¸…å–®

### å¾Œç«¯ API æ¸¬è©¦

- [ ] å¥åº·æª¢æŸ¥ API æ­£å¸¸
- [ ] äº’å‹•è¿½è¹¤ API æ­£å¸¸
- [ ] åå¥½æ¨¡å‹ API æ­£å¸¸
- [ ] æ¨è–¦ç³»çµ± API æ­£å¸¸
- [ ] ä¸»é¡Œç™¼æ˜ API æ­£å¸¸
- [ ] è³‡æ–™é©—è­‰ API æ­£å¸¸
- [ ] ç…§ç‰‡åŒ¹é… API æ­£å¸¸

### å‰ç«¯åŠŸèƒ½æ¸¬è©¦

- [ ] Dashboard æ­£å¸¸é¡¯ç¤º
- [ ] ä¸»é¡Œåˆ—è¡¨æ­£å¸¸é¡¯ç¤º
- [ ] ä¸»é¡Œè©³æƒ…æ­£å¸¸é¡¯ç¤º
- [ ] äº’å‹•æŒ‰éˆ•æ­£å¸¸é‹ä½œ
- [ ] ç·¨è¼¯åŠŸèƒ½æ­£å¸¸é‹ä½œ
- [ ] ç…§ç‰‡æ›¿æ›æ­£å¸¸é‹ä½œ

### éŸ¿æ‡‰å¼æ¸¬è©¦

- [ ] æ‰‹æ©Ÿç‰ˆæ­£å¸¸é¡¯ç¤º
- [ ] å¹³æ¿ç‰ˆæ­£å¸¸é¡¯ç¤º
- [ ] æ¡Œé¢ç‰ˆæ­£å¸¸é¡¯ç¤º
- [ ] æ©«å±æ¨¡å¼æ­£å¸¸é¡¯ç¤º

---

## ğŸ“ æ¸¬è©¦å ±å‘Šæ¨¡æ¿

```markdown
# æ¸¬è©¦å ±å‘Š

## æ¸¬è©¦æ—¥æœŸ
2025-12-30

## æ¸¬è©¦ç’°å¢ƒ
- å¾Œç«¯: Python 3.13, FastAPI
- å‰ç«¯: Node.js 18, React 18
- ç€è¦½å™¨: Chrome/Safari/Firefox

## æ¸¬è©¦çµæœ

### å¾Œç«¯ API
- [ ] äº’å‹•è¿½è¹¤: âœ…/âŒ
- [ ] åå¥½æ¨¡å‹: âœ…/âŒ
- [ ] æ¨è–¦ç³»çµ±: âœ…/âŒ
- [ ] ä¸»é¡Œç™¼æ˜: âœ…/âŒ
- [ ] è³‡æ–™é©—è­‰: âœ…/âŒ
- [ ] ç…§ç‰‡åŒ¹é…: âœ…/âŒ

### å‰ç«¯åŠŸèƒ½
- [ ] Dashboard: âœ…/âŒ
- [ ] ä¸»é¡Œåˆ—è¡¨: âœ…/âŒ
- [ ] äº’å‹•åŠŸèƒ½: âœ…/âŒ
- [ ] éŸ¿æ‡‰å¼è¨­è¨ˆ: âœ…/âŒ

## ç™¼ç¾çš„å•é¡Œ
1. [å•é¡Œæè¿°]
2. [å•é¡Œæè¿°]

## å»ºè­°æ”¹é€²
1. [å»ºè­°]
2. [å»ºè­°]
```

---

**æ¸¬è©¦å®Œæˆå¾Œï¼Œè«‹å°‡æ¸¬è©¦çµæœè¨˜éŒ„åœ¨æ¸¬è©¦å ±å‘Šä¸­ï¼**

