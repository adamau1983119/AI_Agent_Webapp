# 部署狀態檢查腳本

> **建立日期**：2025-12-30  
> **目的**：快速檢查部署狀態和自動部署設置

---

## 🔍 快速檢查命令

### 1. 檢查 Git 提交記錄

```bash
# 查看最近的提交記錄
git log --oneline -10

# 查看最近的提交時間
git log -1 --format="%H %ai %s"

# 查看遠端倉庫
git remote -v
```

### 2. 檢查本地與遠端的差異

```bash
# 檢查是否有未推送的提交
git status

# 檢查本地與遠端的差異
git log origin/main..HEAD

# 如果有未推送的提交，推送到遠端
git push origin main
```

### 3. 檢查部署狀態（需要手動訪問）

**Vercel**：
- Dashboard：https://vercel.com/dashboard
- 專案：`ai-agent-webapp`
- 最新部署時間：_________

**Railway**：
- Dashboard：https://railway.app/dashboard
- 專案：`gentle-enchantment`
- 最新部署時間：_________

---

## 📋 自動檢查清單

### 每次 Git 提交後檢查

- [ ] Git 提交成功（`git push` 無錯誤）
- [ ] Vercel 是否有新部署記錄（1-2 分鐘內）
- [ ] Railway 是否有新部署記錄（2-5 分鐘內）
- [ ] Vercel 部署狀態為 Ready
- [ ] Railway 部署狀態為 Active
- [ ] 生產環境已更新（清除緩存後檢查）

---

## 🧪 測試自動部署

### 快速測試腳本

```bash
# 1. 添加測試版本號
echo "const APP_VERSION = '$(date +%Y-%m-%d-%H%M%S)-test'" >> frontend/src/pages/Dashboard.tsx

# 2. 提交到 Git
git add frontend/src/pages/Dashboard.tsx
git commit -m "test: 測試自動部署 - $(date +%Y-%m-%d-%H:%M:%S)"
git push origin main

# 3. 等待 2-5 分鐘後檢查部署狀態
```

---

## 📊 部署時間對比

### 記錄格式

| Git 提交時間 | Vercel 部署時間 | Railway 部署時間 | 時間差（Vercel） | 時間差（Railway） |
|-------------|----------------|-----------------|----------------|-----------------|
| 2025-12-30 15:00:00 | 2025-12-30 15:01:30 | 2025-12-30 15:03:00 | 1分30秒 | 3分鐘 |

**正常範圍**：
- Vercel：1-3 分鐘
- Railway：2-5 分鐘

**如果時間差過大**：
- 可能自動部署未觸發
- 需要檢查設置

---

## 🔧 故障排除

### 問題 1：Git 提交後沒有自動部署

**可能原因**：
1. Vercel/Railway 未連接 GitHub
2. 自動部署未啟用
3. Webhook 設置錯誤

**解決方法**：
1. 檢查 GitHub Webhooks（Settings → Webhooks）
2. 檢查 Vercel/Railway Git 連接設置
3. 重新連接 GitHub 倉庫

### 問題 2：部署失敗

**可能原因**：
1. 建置錯誤
2. 環境變數缺失
3. 依賴安裝失敗

**解決方法**：
1. 查看部署日誌（Vercel/Railway Dashboard）
2. 檢查錯誤訊息
3. 修復錯誤後重新提交

### 問題 3：部署成功但生產環境未更新

**可能原因**：
1. 瀏覽器緩存
2. CDN 緩存
3. 服務端緩存

**解決方法**：
1. 清除瀏覽器緩存（Ctrl+Shift+R）
2. 等待 CDN 緩存過期（通常 5-10 分鐘）
3. 檢查服務端緩存設置

---

## 📝 檢查記錄模板

### 檢查日期：_________

**Git 提交**：
- 提交時間：_________
- 提交訊息：_________
- 提交 Hash：_________

**Vercel 部署**：
- 部署時間：_________
- 部署狀態：Ready / Building / Error
- 部署來源：GitHub / Manual
- 時間差：_________ 分鐘

**Railway 部署**：
- 部署時間：_________
- 部署狀態：Active / Building / Error
- 部署來源：Git / Manual
- 時間差：_________ 分鐘

**生產環境驗證**：
- 前端更新：✅ / ❌
- 後端更新：✅ / ❌
- 功能測試：✅ / ❌

**問題記錄**：
- _________
- _________

---

**最後更新**：2025-12-30

