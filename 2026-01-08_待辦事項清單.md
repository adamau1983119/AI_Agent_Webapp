# 2026-01-08 待辦事項清單

## 📅 日期：2026年1月8日

---

## 🔴 高優先級（必須完成）

### 1. 修復 Google Custom Search 403 錯誤 ✅ **已完成**

**任務：** 修復 Google Custom Search API 的 403 錯誤

**步驟：**
- [x] 檢查 Railway 環境變數 `GOOGLE_API_KEY` 和 `GOOGLE_SEARCH_ENGINE_ID`
- [x] 驗證 Google Cloud Console 中的 API Key 設定
- [x] 確認 Custom Search API 已啟用
- [x] 檢查 API Key 配額是否用盡
- [x] 驗證 Search Engine ID 是否正確
- [x] 測試修復後的圖片搜尋功能

**結果：** ✅ **成功！** Google Custom Search 返回 10 張圖片，不再出現 403 錯誤

**測試結果：**
- Trace ID: `6f7176f7`
- 返回圖片數量：10 張
- 狀態：success
- 來源：Google Custom Search

**相關文件：** 
- `2026-01-07_圖片搜尋問題診斷記錄.md`
- `2026-01-07_圖片搜尋功能修復成功記錄.md`

---

### 2. 驗證圖片搜尋功能修復 ✅ **已修復，待測試**

**任務：** 確認圖片搜尋功能正常工作

**步驟：**
- [x] 使用關鍵字測試（"CES 懶人包🔥 NVIDIA新卡"）
- [x] 檢查 API 響應中的 `data` 數組是否有圖片（✅ 10 張圖片）
- [x] 確認問題原因（responseInterceptor 提取 data 欄位導致響應不完整）
- [x] 修復響應處理邏輯（使用直接 fetch 獲取完整響應）
- [ ] 測試前端正確顯示圖片（等待 Vercel 部署後測試）
- [ ] 測試選擇圖片並添加到主題（等待測試）

**預期結果：** 圖片搜尋返回結果，前端正確顯示圖片

**當前狀態：** 
- ✅ API 層面已成功
- ✅ 響應處理已修復
- ⏳ 等待 Vercel 部署後測試前端顯示

**修復記錄：**
- Git 提交：`62fd7d1`
- 修復文件：`frontend/src/api/images.ts`

---

## 🟡 中優先級（應該完成）

### 3. 設定其他圖片服務 API Keys（可選）

**任務：** 設定 Unsplash、Pexels、Pixabay 的 API Keys

**步驟：**
- [ ] 申請 Unsplash API Key
  - 前往 [Unsplash Developers](https://unsplash.com/developers)
  - 申請 API Key
  - 在 Railway 環境變數中設定 `UNSPLASH_ACCESS_KEY`
- [ ] 申請 Pexels API Key
  - 前往 [Pexels API](https://www.pexels.com/api/)
  - 申請 API Key
  - 在 Railway 環境變數中設定 `PEXELS_API_KEY`
- [ ] 申請 Pixabay API Key
  - 前往 [Pixabay API](https://pixabay.com/api/docs/)
  - 申請 API Key
  - 在 Railway 環境變數中設定 `PIXABAY_API_KEY`

**預期結果：** 多個圖片服務可用，提高搜尋成功率

---

### 4. 監控系統穩定性

**任務：** 監控修復後的系統穩定性

**步驟：**
- [ ] 檢查 Railway 日誌，確認沒有錯誤
- [ ] 監控 API 請求頻率，確認沒有速率限制問題
- [ ] 檢查前端載入是否正常
- [ ] 確認沒有 429 錯誤

**預期結果：** 系統穩定運行，沒有錯誤

---

## 🟢 低優先級（可以完成）

### 5. 改進關鍵字提取邏輯

**任務：** 優化從內容中提取關鍵字的邏輯

**步驟：**
- [ ] 檢查 `extractKeywords` 函數
- [ ] 改進關鍵字提取算法
- [ ] 確保提取的關鍵字適合圖片搜尋
- [ ] 測試改進後的關鍵字提取

**預期結果：** 提取的關鍵字更適合圖片搜尋

---

### 6. 添加關鍵字建議功能

**任務：** 為用戶提供更好的關鍵字建議

**步驟：**
- [ ] 分析常見的搜尋關鍵字
- [ ] 提供關鍵字建議列表
- [ ] 添加關鍵字歷史記錄
- [ ] 改進關鍵字輸入體驗

**預期結果：** 用戶更容易找到合適的關鍵字

---

## 📋 檢查清單

### 系統狀態檢查
- [ ] 後端部署正常
- [ ] 前端載入正常
- [ ] API 請求正常
- [ ] 沒有速率限制問題
- [ ] 沒有編碼錯誤

### 功能測試
- [ ] 圖片搜尋功能正常
- [ ] 圖片顯示正常
- [ ] 圖片選擇功能正常
- [ ] 圖片添加到主題功能正常

### 文檔更新
- [ ] 更新問題修復記錄
- [ ] 更新 API 配置文檔
- [ ] 更新故障排查指南

---

## 🔗 相關文件

- `2026-01-07_系統問題檢討報告.md`
- `2026-01-07_問題修復日誌.md`
- `2026-01-07_圖片搜尋問題診斷記錄.md`
- `圖片搜尋功能修復行動計劃檢查清單_專家建議版.md`

---

## 📝 備註

### 今日完成的工作（2026-01-07）
- ✅ 修復編碼錯誤
- ✅ 修復前端載入問題
- ✅ 修復速率限制問題
- ✅ 診斷圖片搜尋問題
- ✅ 修復圖片搜尋響應處理
- ✅ 啟用 Google Custom Search API
- ✅ 確認 DeepSeek API 正常運作

### 明日重點（2026-01-08）
1. **最優先：** 測試圖片搜尋前端顯示功能
2. **其次：** 確認圖片可以正常顯示和選擇
3. **可選：** 設定其他圖片服務 API Keys

---

**清單建立時間：** 2026-01-07 21:30  
**建立者：** AI Assistant

